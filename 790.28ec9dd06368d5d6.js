"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([[790],{2790:(re,g,u)=>{u.r(g),u.d(g,{AccountModule:()=>ee});var n=u(433),p=u(6895),l=u(1002),e=u(1571),m=u(1801);let Z=(()=>{class r{constructor(t,o){this.router=t,this.accountService=o,this.accountService.currentUser&&this.router.navigate(["/"])}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(l.F0),e.Y36(m.B))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],decls:2,vars:0,consts:[[1,"container","col-md-6","offset-md-3","mt-5"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"router-outlet"),e.qZA())},dependencies:[l.lC],encapsulation:2}),r})();var v=u(590),_=u(2322);function b(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1,"Username is required"),e.qZA())}function C(r,i){if(1&r&&(e.TgZ(0,"div",12),e.YNc(1,b,2,0,"div",13),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.username.errors.required)}}function A(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1,"Password is required"),e.qZA())}function q(r,i){if(1&r&&(e.TgZ(0,"div",12),e.YNc(1,A,2,0,"div",13),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.password.errors.required)}}function T(r,i){1&r&&e._UZ(0,"span",14)}const h=function(r){return{"is-invalid":r}};let U=(()=>{class r{constructor(t,o,s,a,d){this.formBuilder=t,this.route=o,this.router=s,this.accountService=a,this.alertService=d,this.loading=!1,this.submitted=!1}ngOnInit(){this.form=this.formBuilder.group({username:["",n.kI.required],password:["",n.kI.required]})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.accountService.login(this.f.username.value,this.f.password.value).pipe((0,v.P)()).subscribe({next:()=>{this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/")},error:t=>{this.alertService.error(t),this.loading=!1}}))}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(n.qu),e.Y36(l.gz),e.Y36(l.F0),e.Y36(m.B),e.Y36(_.c))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],decls:21,vars:11,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],["type","text","formControlName","username",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["routerLink","../register",1,"btn","btn-link"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Login"),e.qZA(),e.TgZ(3,"div",2)(4,"form",3),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(5,"div",4)(6,"label",5),e._uU(7,"Username"),e.qZA(),e._UZ(8,"input",6),e.YNc(9,C,2,1,"div",7),e.qZA(),e.TgZ(10,"div",4)(11,"label",5),e._uU(12,"Password"),e.qZA(),e._UZ(13,"input",8),e.YNc(14,q,2,1,"div",7),e.qZA(),e.TgZ(15,"div")(16,"button",9),e.YNc(17,T,1,0,"span",10),e._uU(18," Login "),e.qZA(),e.TgZ(19,"a",11),e._uU(20,"Register"),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("formGroup",o.form),e.xp6(4),e.Q6J("ngClass",e.VKq(7,h,o.submitted&&o.f.username.errors)),e.xp6(1),e.Q6J("ngIf",o.submitted&&o.f.username.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(9,h,o.submitted&&o.f.password.errors)),e.xp6(1),e.Q6J("ngIf",o.submitted&&o.f.password.errors),e.xp6(2),e.Q6J("disabled",o.loading),e.xp6(1),e.Q6J("ngIf",o.loading))},dependencies:[p.mk,p.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,l.rH],encapsulation:2}),r})();class N{constructor(i,t){this.username=i.get("username").value,this.nomeCompleto=i.get("completeName").value,this.dataNascimento=new Date,this.email=i.get("email").value,this.password=i.get("password").value,this.passwordConfirm=i.get("passwordConfirm").value,this.phoneNumber=i.get("phoneNumber").value,this.cep=t.cep,this.logradouro=t.logradouro,this.bairro=t.bairro,this.localidade=t.localidade,this.uf=t.uf,this.ibge=t.ibge,this.ddd=t.ddd,this.dataNascimento=new Date}}function w(r,i){return t=>{const s=t.controls[i];s.errors&&!s.errors.confirmPassword||s.setErrors(t.controls[r].value!==s.value?{confirmPassword:!0}:null)}}var x=u(4004),J=u(529);let y=(()=>{class r{constructor(t){this.http=t,this.VIACEP_API_URL="https://viacep.com.br/ws"}getAddressByCep(t){return this.http.get(`${this.VIACEP_API_URL}/${t}/json`).pipe((0,x.U)(s=>({cep:s.cep,logradouro:s.logradouro,bairro:s.bairro,localidade:s.localidade,uf:s.uf,ibge:s.ibge,ddd:s.ddd})))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(J.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Y(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1,"Nome Completo \xe9 obrigat\xf3rio"),e.qZA())}function S(r,i){if(1&r&&(e.TgZ(0,"div",18),e.YNc(1,Y,2,0,"div",19),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.completeName.errors.required)}}function R(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1,"E-mail \xe9 obrigat\xf3rio"),e.qZA())}function Q(r,i){if(1&r&&(e.TgZ(0,"div",18),e.YNc(1,R,2,0,"div",19),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.email.errors.required)}}function E(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1,"Celular \xe9 obrigat\xf3rio"),e.qZA())}function F(r,i){if(1&r&&(e.TgZ(0,"div",18),e.YNc(1,E,2,0,"div",19),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.phoneNumber.errors.required)}}function L(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1,"Username \xe9 obrigat\xf3rio"),e.qZA())}function P(r,i){if(1&r&&(e.TgZ(0,"div",18),e.YNc(1,L,2,0,"div",19),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.username.errors.required)}}function k(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1,"Senha \xe9 obrigat\xf3rio"),e.qZA())}function B(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1,"Senha deve conter no m\xednimo 6 caracteres"),e.qZA())}function V(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1,"Senha deve conter "),e._UZ(2,"br"),e._uU(3,"- 1 car\xe1cter especial, "),e._UZ(4,"br"),e._uU(5,"- 1 letra mai\xfascula, "),e._UZ(6,"br"),e._uU(7,"- 1 letra min\xfascula "),e._UZ(8,"br"),e._uU(9,"- 1 numero "),e.qZA())}function K(r,i){if(1&r&&(e.TgZ(0,"div",18),e.YNc(1,k,2,0,"div",19),e.YNc(2,B,2,0,"div",19),e.YNc(3,V,10,0,"div",19),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.password.errors.required),e.xp6(1),e.Q6J("ngIf",t.f.password.errors.minlength),e.xp6(1),e.Q6J("ngIf",t.f.password.errors.passwordInvalid)}}function z(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1,"Confirmar Senha \xe9 obrigat\xf3rio"),e.qZA())}function M(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1,"As senhas devem ser iguais"),e.qZA())}function D(r,i){if(1&r&&(e.TgZ(0,"div",18),e.YNc(1,z,2,0,"div",19),e.YNc(2,M,2,0,"div",19),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.passwordConfirm.errors.required),e.xp6(1),e.Q6J("ngIf",t.f.passwordConfirm.errors.confirmPassword)}}function j(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1,"CEP \xe9 obrigat\xf3rio"),e.qZA())}function $(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1,"CEP \xe9 inv\xe1lido"),e.qZA())}function O(r,i){if(1&r&&(e.TgZ(0,"div",18),e.YNc(1,j,2,0,"div",19),e.YNc(2,$,2,0,"div",19),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.cep.errors.required),e.xp6(1),e.Q6J("ngIf",t.f.cep.errors.invalidCep)}}function X(r,i){1&r&&(e.TgZ(0,"div",4)(1,"div",20)(2,"label",21),e._uU(3,"Rua/Logradouro"),e.qZA(),e._UZ(4,"input",22),e.qZA(),e.TgZ(5,"div",20)(6,"label",23),e._uU(7,"Bairro"),e.qZA(),e._UZ(8,"input",24),e.qZA(),e.TgZ(9,"div",20)(10,"label",25),e._uU(11,"Cidade"),e.qZA(),e._UZ(12,"input",26),e.qZA(),e.TgZ(13,"div",20)(14,"label",27),e._uU(15,"Estado"),e.qZA(),e._UZ(16,"input",28),e.qZA()())}function G(r,i){1&r&&e._UZ(0,"span",29)}const c=function(r){return{"is-invalid":r}},H=[{path:"",component:Z,children:[{path:"login",component:U},{path:"register",component:(()=>{class r{constructor(t,o,s,a,d,f){this.formBuilder=t,this.route=o,this.router=s,this.accountService=a,this.alertService=d,this.addressService=f,this.loading=!1,this.submitted=!1,this.showAddressFields=!1,this.address=null}ngOnInit(){this.form=this.formBuilder.group({completeName:["",n.kI.required],username:["",n.kI.required],password:["",[n.kI.required,n.kI.minLength(6)]],passwordConfirm:["",[n.kI.required]],email:["",[n.kI.required,n.kI.email]],phoneNumber:["",n.kI.required],cep:["",n.kI.required],logradouro:["",n.kI.required],bairro:["",n.kI.required],localidade:["",n.kI.required],uf:["",n.kI.required]},{validators:[w("password","passwordConfirm"),r=>{const a=r.controls.password;return!a.value||/[A-Z]/.test(a.value)&&/[a-z]/.test(a.value)&&/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(a.value)&&/[0-9]/.test(a.value)?a.setErrors(null):a.setErrors({passwordInvalid:!0})}]}),this.form.get("cep")?.valueChanges.subscribe(t=>{t&&8===t.length&&t.includes("-")||(t&&8===t.length?this.addressService.getAddressByCep(t).subscribe({next:o=>{if(this.address=o,!o.logradouro)return this.alertService.error("CEP n\xe3o encontrado."),this.showAddressFields=!1,void this.f.cep.setErrors({invalidCep:!0});this.showAddressFields=!0,this.f.cep.setErrors(null),this.form.patchValue({logradouro:o.logradouro,bairro:o.bairro,localidade:o.localidade,uf:o.uf})},error:o=>{this.alertService.error(o),this.showAddressFields=!1,this.f.cep.setErrors({invalidCep:!0})}}):this.showAddressFields=!1)})}get f(){return this.form.controls}onSubmit(){if(this.submitted=!0,this.alertService.clear(),this.form.invalid)return;this.loading=!0;let t=new N(this.form,this.address);this.accountService.register(t).pipe((0,v.P)()).subscribe({next:()=>{this.alertService.success("Registration successful",{keepAfterRouteChange:!0}),this.router.navigate(["../login"],{relativeTo:this.route})},error:o=>{this.alertService.error(o),this.loading=!1}})}onPhoneKeyPress(t){const s=String.fromCharCode(t.charCode);if(/[0-9]/.test(s)){const a=t.target,d=a.value.length;0===d&&(a.value="("+a.value),3===d&&(a.value=a.value+") "),10===d&&(a.value=a.value+"-")}else t.preventDefault()}formatarCep(t){let o=t.target.value.replace(/\D/g,"");o.length>8&&(o=o.substr(0,8)),t.target.value=8===o.length?`${o.substr(0,5)}-${o.substr(5,3)}`:o}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(n.qu),e.Y36(l.gz),e.Y36(l.F0),e.Y36(m.B),e.Y36(_.c),e.Y36(y))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],decls:47,vars:32,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],["type","text","formControlName","completeName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["type","text","formControlName","phoneNumber",1,"form-control",3,"ngClass","keypress"],["type","text","formControlName","username",1,"form-control",3,"ngClass"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],["type","password","formControlName","passwordConfirm",1,"form-control",3,"ngClass"],["type","text","formControlName","cep","maxLength","9",1,"form-control",3,"ngClass","input"],["class","mb-3",4,"ngIf"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["routerLink","../login",1,"btn","btn-link"],[1,"invalid-feedback"],[4,"ngIf"],[1,"form-group"],["for","logradouro"],["type","text","id","logradouro","formControlName","logradouro","readonly","",1,"form-control"],["for","bairro"],["type","text","id","bairro","formControlName","bairro","readonly","",1,"form-control"],["for","localidade"],["type","text","id","localidade","formControlName","localidade","readonly","",1,"form-control"],["for","uf"],["type","text","id","uf","formControlName","uf","readonly","",1,"form-control"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Register"),e.qZA(),e.TgZ(3,"div",2)(4,"form",3),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(5,"div",4)(6,"label",5),e._uU(7,"Nome Completo"),e.qZA(),e._UZ(8,"input",6),e.YNc(9,S,2,1,"div",7),e.qZA(),e.TgZ(10,"div",4)(11,"label",5),e._uU(12,"E-mail"),e.qZA(),e._UZ(13,"input",8),e.YNc(14,Q,2,1,"div",7),e.qZA(),e.TgZ(15,"div",4)(16,"label",5),e._uU(17,"Celular"),e.qZA(),e.TgZ(18,"input",9),e.NdJ("keypress",function(a){return o.onPhoneKeyPress(a)}),e.qZA(),e.YNc(19,F,2,1,"div",7),e.qZA(),e.TgZ(20,"div",4)(21,"label",5),e._uU(22,"Username"),e.qZA(),e._UZ(23,"input",10),e.YNc(24,P,2,1,"div",7),e.qZA(),e.TgZ(25,"div",4)(26,"label",5),e._uU(27,"Senha"),e.qZA(),e._UZ(28,"input",11),e.YNc(29,K,4,3,"div",7),e.qZA(),e.TgZ(30,"div",4)(31,"label",5),e._uU(32,"Confirmar Senha"),e.qZA(),e._UZ(33,"input",12),e.YNc(34,D,3,2,"div",7),e.qZA(),e.TgZ(35,"div",4)(36,"label",5),e._uU(37,"CEP"),e.qZA(),e.TgZ(38,"input",13),e.NdJ("input",function(a){return o.formatarCep(a)}),e.qZA(),e.YNc(39,O,3,2,"div",7),e.qZA(),e.YNc(40,X,17,0,"div",14),e.TgZ(41,"div")(42,"button",15),e.YNc(43,G,1,0,"span",16),e._uU(44," Registrar "),e.qZA(),e.TgZ(45,"a",17),e._uU(46,"Cancel"),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("formGroup",o.form),e.xp6(4),e.Q6J("ngClass",e.VKq(18,c,o.submitted&&o.f.completeName.errors)),e.xp6(1),e.Q6J("ngIf",o.submitted&&o.f.completeName.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(20,c,o.submitted&&o.f.email.errors)),e.xp6(1),e.Q6J("ngIf",o.submitted&&o.f.email.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(22,c,o.submitted&&o.f.phoneNumber.errors)),e.xp6(1),e.Q6J("ngIf",o.submitted&&o.f.phoneNumber.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(24,c,o.submitted&&o.f.username.errors)),e.xp6(1),e.Q6J("ngIf",o.submitted&&o.f.username.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(26,c,o.submitted&&o.f.password.errors)),e.xp6(1),e.Q6J("ngIf",o.submitted&&o.f.password.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(28,c,o.submitted&&o.f.passwordConfirm.errors)),e.xp6(1),e.Q6J("ngIf",o.submitted&&o.f.passwordConfirm.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(30,c,o.submitted&&o.f.cep.errors)),e.xp6(1),e.Q6J("ngIf",o.submitted&&o.f.cep.errors),e.xp6(1),e.Q6J("ngIf",o.showAddressFields),e.xp6(2),e.Q6J("disabled",o.loading),e.xp6(1),e.Q6J("ngIf",o.loading))},dependencies:[p.mk,p.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,l.rH],encapsulation:2}),r})()}]}];let W=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[l.Bz.forChild(H),l.Bz]}),r})(),ee=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[p.ez,n.UX,W]}),r})()}}]);